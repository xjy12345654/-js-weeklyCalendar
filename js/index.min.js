function weeklyCalendar(t){t=t||{};var e=!1;if(Object.defineProperty){var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,n)}var a=document,r=a.querySelector("#week_cal_box"),o=-40,s=!0,l=r.querySelectorAll(".month_num"),m=Array.prototype.slice.call(l),i=m.slice(0,7),c=m.slice(7,14),u=m.slice(14,21),d=m.slice(21,28),f=m.slice(28,35),y=a.querySelector("#year_text"),h=a.querySelector("#month_text");l=null;var v,_=1,g=!0,x=-1,C=t.sel_tDate,N=C?new Date(C):new Date,D=w(new Date).date,p=w(N);function w(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate();return{year:n,month:a,day:r,date:n+"-"+a+"-"+r}}function b(t,e){var n=e,a=t;return w(new Date(a.getTime()+864e5*(n-(a.getDay()+6)%7)))}function A(t,e,n){t=t;if(null==n)for(var a=0;a<7;a++){t++;var r=b(N,t);(o=e[a]).textContent=r.day,o.setAttribute("data-date",r.date),r.date==p.date?o.className="month_num selected_num":o.className="month_num",r.date==D&&(o.className="month_num today")}else for(a=0;a<7;a++){t++;r=b(N,t);var o=e[a],s=n[a];o.textContent=r.day,s.textContent=r.day,o.setAttribute("data-date",r.date),s.setAttribute("data-date",r.date),r.date==p.date?o.className="month_num selected_num":o.className="month_num",r.date==p.date?s.className="month_num selected_num":s.className="month_num",r.date==D&&(o.className="month_num today"),r.date==D&&(s.className="month_num today")}r=null}return A(x,u),A(x-7,c,f),A(x+7,i,d),y.textContent=p.year,h.textContent=p.month,r.addEventListener("touchstart",(function(t){v=t.touches[0].pageX,0==o?(r.style="transition:transform 0s;transform:translateX(-60%)",o=-60,g=!1):-80==o&&(r.style="transition:transform 0s;transform:translateX(-20%)",o=-20,g=!1)}),!!e&&{passive:!0}),r.addEventListener("touchmove",(function(t){if(s){let n=t.touches[0].pageX;if(v-n<0){x-=7,o+=20,r.style="transition:transform 0.7s; transform:translateX("+o+"%)",_%3==1&&g&&A(x-7,i,d),-40==o&&(A(x-7,c,f),_=0,g=!0);var e=b(N,x+1);y.textContent=e.year,h.textContent=e.month}else if(v-n>0){x+=7,o-=20,r.style="transition:transform 0.7s; transform:translateX("+o+"%)",_%3==1&&g&&A(x+7,c,f),-40==o&&(A(x+7,i,d),g=!0,_=0);e=b(N,x+1);y.textContent=e.year,h.textContent=e.month}_++,s=!1}}),!!e&&{passive:!0}),r.addEventListener("touchend",(function(t){0==o?A(x-7,u):-80==o&&A(x+7,u),s=!0})),r.addEventListener("click",(function(e){e.stopPropagation();var n=e.target;if("LI"==n.tagName){var a=n.getAttribute("data-date");p=w(C=a),y.textContent=p.year,h.textContent=p.month;for(var o=r.querySelectorAll(".month_num"),s=o.length,l=0;l<s;l++){var m=o[l];m.className="month_num",m.getAttribute("data-date")!=D||(m.className="month_num today")}o=null,n.className="month_num selected_num",t.clickDate&&t.clickDate(p)}})),{init:function(t){r.style="transition:transform 0s; transform:translateX(-40%)",N=t?new Date(t):new Date,p=w(N),o=-40,s=!0,_=1,g=!0,x=-1,y.textContent=p.year,h.textContent=p.month,A(x,u),A(x-7,c,f),A(x+7,i,d)}}}

